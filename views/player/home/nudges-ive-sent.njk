{% macro linkNudge(post_url) %}
  {% if post_url %}
    <a href="{{ post_url }}" target="_blank">{{ caller() }}</a>
  {% else %}
    {{ caller() }}
  {% endif %}
{% endmacro %}
<div
  @click="isMobileWidth && (cardExpanded = !cardExpanded)"
  class="flex -ml-4 lg:ml-0 items-start"
>
  <div x-show="isMobileWidth" x-bind:class="'size-10 shrink-0 grow-0 ' + (cardExpanded ? 'i-mdi-chevron-down' : 'i-mdi-chevron-right')"></div>
  <div class="grow shrink">
    <h1>Nudges I've sent</h1>
    {% if sentNudges.length === 0 %}
      <p>If you nudge your giftee the sent nudges will show up here.</p>
    {% else %}
      <p>You've sent {{ sentNudges.length | ssPlur('nudge') }}.</p>
    {% endif %}
    <p class="text-sm">(Send nudges under &quot;My giftee&quot;)</p>
  </div>
  <div class="size-10 shrink-0 grow-0 i-mdi-message-bubble"></div>
</div>
<div x-show="!isMobileWidth || cardExpanded">
{% if sentNudges.length === 0 %}
  <div class="mt-8 space-y-2">
    <p>Once you have your Giftee's address you can send them a nudge under &quot;My giftee&quot;.</p>
    <p>Nudges are a post by <a href="https://bsky.app/profile/robosanta.secretsanta.nz" target="_blank">@robosanta.secretsanta.nz</a> that tag your Giftee so you can nudge them for a little more information.</p>
  </div>
{% endif %}
{% for nudge in sentNudges %}
  <p class="mt-8">
    {% call linkNudge(nudge.post_url) %}
      @{{ nudge.giftee_handle }} nudged with {{ nudge.nudge_type }} on {{ nudge.created_at | ssDatetime }}
    {% endcall %}
  </p>
{% endfor %}
</div>
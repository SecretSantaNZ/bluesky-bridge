<div
  @click="isMobileWidth && (cardExpanded = !cardExpanded)"
  class="flex -ml-4 lg:ml-0 items-start"
>
  <div x-show="isMobileWidth" x-bind:class="'size-10 shrink-0 grow-0 ' + (cardExpanded ? 'i-mdi-chevron-down' : 'i-mdi-chevron-right')"></div>
  <div class="grow shrink">
    <h1>About me</h1>
    <p>Check and update your details to make sure Santa can find you</p>
  </div>
  <%- include('../partials/avatar.ejs', {avatar_url: player.avatar_url}) %>
</div>
<div x-show="!isMobileWidth || cardExpanded" class="flex flex-col grow">
  <div class="font-semibold mt-8 text-xl">
  <% if (player.player_type === 'mastodon') {%>
    <a href="https://<%= player.mastodon_host %>/@<%= encodeURIComponent(player.mastodon_account.split('@')[0]) %>" target="_blank">@<%= player_display_handle %></a></div>
  <% } else {%>
    <a href="https://bsky.app/profile/<%= encodeURIComponent(player.handle) %>" target="_blank">@<%= player.handle %></a></div>
  <% } %>
  <div class="mt-4 flex items-start">
    <div class="grow shrink">
      <h2 class="text-md font-semibold">My address</h2>
      <p><%= player.address %></p>
      <p><%= player.delivery_instructions %></p>
    </div>
    <% if (!player.locked_giftee_for_count) { %>
      <button @click="$dispatch('ss-open-modal', {modal: 'address', modalData: <%= JSON.stringify({address: player.address, delivery_instructions: player.delivery_instructions }) %>})" class="size-10 p-2 rounded-full shrink-0">
        <span class="i-mdi-pencil size-full"><span class="sr-only">Edit addreess</span></span>
      </button>
    <% } %>
  </div>
  <div class="mt-4 flex items-start">
    <div class="grow shrink">
      <h2 class="text-md font-semibold">My game</h2>
      <p>Playing as a <b><%= player.game_mode %></b><%= player.game_mode === 'Regular' || player.game_mode === 'Giftee Only' ? '' : ' for up to ' + player.max_giftees + ' giftees' %></p>
    </div>
    <% if (settings.signups_open) { %>
      <button @click="$dispatch('ss-open-modal', {modal: 'game-mode', modalData: <%= JSON.stringify({game_mode: player.game_mode || 'Regular', max_giftees: player.max_giftees }) %>})" class="size-10 p-2 rounded-full shrink-0">
        <span class="i-mdi-pencil size-full"><span class="sr-only">Edit game mood</span></span>
      </button>
    <% } %>
  </div>
  <div class="grow shrink"></div>
  <button @click="$dispatch('ss-open-modal', {modal: 'opt-out', modalData: {}})" id="opt-out-button" class="w-lg px-8 py-2 mt-12 border-4 border-red-600 hover:bg-red-300 text-red-600">Opt out</button>
</div>

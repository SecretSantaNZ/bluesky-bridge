
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Secret Santa Login</title>
    <script>
      setInterval(async () => {
        const result = await fetch('/oauth/poll', {headers: {Authorization: 'Bearer <%= loginToken %>'}});
        if (result.ok) {
          const response = await result.json();
          window.location = response.redirectTo;
        }
      }, 1000)
    </script>
    <style>[x-cloak] { display: none !important; }</style>
  </head>
  <body>
    <div>
      Post to login:
      <pre>
        <%= requiredPost %>
      </pre>
    </div>
  </body>
</html>